---
const basePlanFeatures = [
  { icon: 'qr', text: "Pedidos por QR desde la mesa" },
  { icon: 'printer', text: "Impresión automática de comandas" },
  { icon: 'chart', text: "Panel de administrador completo" },
  { icon: 'table', text: "Administración de mesas" },
  { icon: 'edit', text: "Herramientas de edición de la carta" },
  { icon: 'headset', text: "Atención uno a uno con nosotros" },
  { icon: 'receipt', text: "Generación de ticket" },
];

const extensions = [
  { icon: 'truck', title: "Control de Delivery", description: "Gestioná pedidos de delivery desde el mismo panel." },
  { icon: 'split', title: "División de cuenta", description: "Cada integrante de la mesa paga lo suyo." },
  { icon: 'bag', title: "Modo Take Away", description: "Pedidos para llevar integrados en tu sistema." },
  { icon: 'users', title: "Panel para mozos", description: "Vista exclusiva para que tu equipo gestione las mesas." },
];
---

<section class="bg-background py-24 overflow-hidden">
  <div class="max-w-6xl mx-auto px-6">
    <div class="text-center mb-16 carousel-header">
      <p class="text-primary text-sm uppercase tracking-widest mb-4">Precios</p>
      <h2 class="text-4xl md:text-5xl font-sans font-bold text-foreground">Simple y transparente</h2>
      <p class="text-xl text-muted-foreground max-w-2xl mx-auto mt-4">
        Arrancá con la experiencia completa y sumá extensiones a medida que las necesites.
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
      <!-- Pack Base -->
      <div class="carousel-card base-card bg-secondary rounded-2xl p-8 border border-border flex flex-col">
        <div class="mb-6">
          <p class="text-primary text-sm uppercase tracking-widest mb-2">Pack Base</p>
          <div class="flex items-baseline gap-2">
            <span class="text-5xl font-sans font-bold text-foreground">$30.000</span>
            <span class="text-muted-foreground text-lg">/mes</span>
          </div>
        </div>
        <p class="text-muted-foreground mb-6">La experiencia completa de autoservicio para tus clientes, con toda la gestión resuelta para vos.</p>
        <div class="space-y-4 flex-1">
          {basePlanFeatures.map((feature, i) => (
            <div class="benefit-item" data-index={i}>
              <div class="w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-primary">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
              </div>
              <span class="text-foreground font-medium text-sm">{feature.text}</span>
            </div>
          ))}
        </div>
        <a href="https://wa.me/543408681915?text=Hola!%20Me%20interesa%20una%20demo%20de%20PIRU%20para%20mi%20restaurante." target="_blank" rel="noopener noreferrer" class="mt-8 block w-full text-center bg-primary hover:bg-primary/90 text-primary-foreground py-3 rounded-lg font-medium transition-colors">
          Solicitar demo
        </a>
      </div>

      <!-- Extensiones -->
      <div class="carousel-card extensions-card flex flex-col gap-6">
        <div class="mb-2">
          <p class="text-primary text-sm uppercase tracking-widest mb-2">Extensiones</p>
          <div class="flex items-baseline gap-2">
            <span class="text-5xl font-sans font-bold text-foreground">$5.000</span>
            <span class="text-muted-foreground text-lg">/mes c/u</span>
          </div>
          <p class="text-muted-foreground mt-2">Sumá nuevas experiencias y herramientas según lo que necesite tu negocio.</p>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 flex-1">
          {extensions.map((ext, i) => (
            <div class="extension-item bg-primary rounded-xl p-5 flex flex-col gap-3" data-index={i}>
              <div class="w-10 h-10 rounded-lg bg-white/20 flex items-center justify-center flex-shrink-0">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-primary-foreground">
                  {ext.icon === 'truck' && (
                    <>
                      <path d="M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"/>
                      <path d="M15 18h2a1 1 0 0 0 1-1v-3.28a1 1 0 0 0-.684-.948l-1.923-.641a1 1 0 0 1-.684-.949V8h4a2 2 0 0 1 2 2v8a1 1 0 0 1-1 1h-2"/>
                      <circle cx="7" cy="18" r="2"/>
                      <circle cx="17" cy="18" r="2"/>
                    </>
                  )}
                  {ext.icon === 'split' && (
                    <>
                      <path d="M16 3h5v5"/>
                      <path d="M8 3H3v5"/>
                      <path d="M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3"/>
                      <path d="m15 9 6-6"/>
                    </>
                  )}
                  {ext.icon === 'bag' && (
                    <>
                      <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/>
                      <path d="M3 6h18"/>
                      <path d="M16 10a4 4 0 0 1-8 0"/>
                    </>
                  )}
                  {ext.icon === 'users' && (
                    <>
                      <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                      <circle cx="9" cy="7" r="4"/>
                      <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                      <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                    </>
                  )}
                </svg>
              </div>
              <h4 class="text-primary-foreground font-semibold text-base leading-tight">{ext.title}</h4>
              <p class="text-primary-foreground/80 text-sm leading-relaxed">{ext.description}</p>
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const header = document.querySelector('.carousel-header');
    const baseCard = document.querySelector('.base-card');
    const extensionsCard = document.querySelector('.extensions-card');
    const benefitItems = document.querySelectorAll('.benefit-item');
    const extensionItems = document.querySelectorAll('.extension-item');

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            if (entry.target === header) {
              entry.target.classList.add('animate-fade-in-up');
            }
            if (entry.target === baseCard) {
              entry.target.classList.add('animate-slide-in-left');
            }
            if (entry.target === extensionsCard) {
              entry.target.classList.add('animate-slide-in-right');
            }
          }
        });
      },
      { threshold: 0.1 }
    );

    const itemObserver = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const index = parseInt((entry.target as HTMLElement).dataset.index || '0');
            setTimeout(() => {
              entry.target.classList.add('animate-slide-in');
            }, index * 100);
          }
        });
      },
      { threshold: 0.1 }
    );

    if (header) observer.observe(header);
    if (baseCard) observer.observe(baseCard);
    if (extensionsCard) observer.observe(extensionsCard);
    benefitItems.forEach((item) => itemObserver.observe(item));
    extensionItems.forEach((item) => itemObserver.observe(item));
  });
</script>

<style>
  .carousel-header {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }

  .carousel-header.animate-fade-in-up {
    opacity: 1;
    transform: translateY(0);
  }

  .base-card {
    opacity: 0;
    transform: translateX(-30px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }

  .base-card.animate-slide-in-left {
    opacity: 1;
    transform: translateX(0);
  }

  .extensions-card {
    opacity: 0;
    transform: translateX(30px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }

  .extensions-card.animate-slide-in-right {
    opacity: 1;
    transform: translateX(0);
  }

  .benefit-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    opacity: 0;
    transform: translateX(-20px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }

  .benefit-item.animate-slide-in {
    opacity: 1;
    transform: translateX(0);
  }

  .extension-item {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }

  .extension-item.animate-slide-in {
    opacity: 1;
    transform: translateY(0);
  }
</style>
