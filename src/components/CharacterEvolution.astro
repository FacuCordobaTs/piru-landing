---
const evolutionLevels = [
  {
    id: 1,
    name: "Piru Novato",
    level: "Nivel 1-10",
    image: "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/piru-transparent-jKURbxz8K71OitPoi1zZiiIORk2lcG.png",
    description: "Tu aventura comienza aquí. Un joven héroe con equipo básico, listo para forjar su leyenda.",
    features: ["Equipo básico de cuero", "Estadísticas iniciales", "Primeros hábitos"],
  },
  {
    id: 2,
    name: "Piru Guerrero",
    level: "Nivel 11-25",
    image: "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/pirunivel2-X4HqjeL6PhWsXQsCKbUoiyTLrfSqnk.png",
    description: "Has demostrado tu valor. Ahora portas armadura y armas dignas de un verdadero guerrero.",
    features: ["Armadura de combate", "Espada y escudo", "Hábitos intermedios"],
  },
  {
    id: 3,
    name: "Piru Campeón",
    level: "Nivel 26-40",
    image: "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/pirunivel3-pausg12Pfbb2pd8afIh5JJB8Ko2i0A.png",
    description: "Tu disciplina te ha convertido en un campeón. Las llamas del progreso arden en tu espada.",
    features: ["Armadura élite", "Espada flamígera", "Hábitos avanzados"],
  },
  {
    id: 4,
    name: "Piru Legendario",
    level: "Nivel 41+",
    image: "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/pirunivel4-uQkDmFPmeDKeY2N73GzSIhaDqmS7Lg.png",
    description: "Has alcanzado la maestría absoluta. Tu armadura dorada y poder místico inspiran a otros héroes.",
    features: ["Armadura legendaria", "Poder místico", "Maestría completa"],
  },
];
---

<section class="py-20 bg-slate-900/50">
  <div class="container mx-auto px-4">
    <div class="text-center mb-12">
      <h2 class="text-4xl md:text-5xl font-bold text-white mb-4 font-cinzel">Evolución del Personaje</h2>
      <p class="text-xl text-slate-300 max-w-3xl mx-auto">
        Completa tus hábitos y observa cómo tu Piru evoluciona desde un novato hasta convertirse en una leyenda
      </p>
    </div>

    <div class="max-w-4xl mx-auto">
      <div class="relative bg-slate-800/50 backdrop-blur-sm rounded-2xl p-8 border border-slate-700">
        <!-- Navigation buttons -->
        <button
          id="prev-evolution"
          class="absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-slate-700/50 hover:bg-slate-600/50 text-white rounded-md p-2 transition-colors"
        >
          <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
        </button>

        <button
          id="next-evolution"
          class="absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-slate-700/50 hover:bg-slate-600/50 text-white rounded-md p-2 transition-colors"
        >
          <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </button>

        <div class="grid md:grid-cols-2 gap-8 items-center">
          <!-- Character Image -->
          <div class="flex justify-center">
            <div class="relative">
              <div class="w-80 h-80 bg-gradient-to-br from-yellow-400/20 to-orange-500/20 rounded-full flex items-center justify-center backdrop-blur-sm border border-yellow-400/30">
                {evolutionLevels.map((evolution, index) => (
                  <img
                    key={index}
                    src={evolution.image || "/placeholder.svg"}
                    alt={evolution.name}
                    class={`absolute w-64 h-64 object-contain drop-shadow-2xl transition-opacity duration-300 ${index === 0 ? 'opacity-100' : 'opacity-0'}`}
                    data-evolution-image={index}
                  />
                ))}
              </div>
            </div>
          </div>

          <!-- Character Info -->
          <div class="text-center md:text-left">
            <h3 id="evolution-name" class="text-3xl font-bold text-white mb-2 font-cinzel">{evolutionLevels[0].name}</h3>
            <p id="evolution-description" class="text-slate-300 text-lg mb-6 leading-relaxed">{evolutionLevels[0].description}</p>

            <div class="space-y-3">
              <h4 class="text-xl font-semibold text-yellow-400 font-cinzel">Características:</h4>
              <ul id="evolution-features" class="space-y-2">
                {evolutionLevels[0].features.map((feature, index) => (
                  <li key={index} class="flex items-center text-slate-300">
                    <div class="w-2 h-2 bg-yellow-400 rounded-full mr-3 flex-shrink-0"></div>
                    {feature}
                  </li>
                ))}
              </ul>
            </div>
          </div>
        </div>

        <!-- Progress indicators -->
        <div class="flex justify-center mt-8 space-x-2" id="evolution-dots">
          {evolutionLevels.map((_, index) => (
            <button
              key={index}
              class={`w-3 h-3 rounded-full transition-colors ${index === 0 ? "bg-yellow-400" : "bg-slate-600"}`}
              data-evolution-dot={index}
            />
          ))}
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  const evolutionLevels = [
    {
      name: "Piru Novato",
      level: "Nivel 1-10",
      description: "Tu aventura comienza aquí. Un joven héroe con equipo básico, listo para forjar su leyenda.",
      features: ["Equipo básico de cuero", "Estadísticas iniciales", "Primeros hábitos"],
    },
    {
      name: "Piru Guerrero",
      level: "Nivel 11-25",
      description: "Has demostrado tu valor. Ahora portas armadura y armas dignas de un verdadero guerrero.",
      features: ["Armadura de combate", "Espada y escudo", "Hábitos intermedios"],
    },
    {
      name: "Piru Campeón",
      level: "Nivel 26-40",
      description: "Tu disciplina te ha convertido en un campeón. Las llamas del progreso arden en tu espada.",
      features: ["Armadura élite", "Espada flamígera", "Hábitos avanzados"],
    },
    {
      name: "Piru Legendario",
      level: "Nivel 41+",
      description: "Has alcanzado la maestría absoluta. Tu armadura dorada y poder místico inspiran a otros héroes.",
      features: ["Armadura legendaria", "Poder místico", "Maestría completa"],
    },
  ];

  let currentLevel = 0;

  function updateEvolution() {
    const images = document.querySelectorAll('[data-evolution-image]');
    const dots = document.querySelectorAll('[data-evolution-dot]');
    const nameEl = document.getElementById('evolution-name');
    const levelEl = document.getElementById('evolution-level');
    const descriptionEl = document.getElementById('evolution-description');
    const featuresEl = document.getElementById('evolution-features');

    const current = evolutionLevels[currentLevel];

    images.forEach((img, index) => {
      img.classList.toggle('opacity-100', index === currentLevel);
      img.classList.toggle('opacity-0', index !== currentLevel);
    });

    dots.forEach((dot, index) => {
      dot.classList.toggle('bg-yellow-400', index === currentLevel);
      dot.classList.toggle('bg-slate-600', index !== currentLevel);
    });

    if (nameEl) nameEl.textContent = current.name;
    if (levelEl) levelEl.textContent = current.level;
    if (descriptionEl) descriptionEl.textContent = current.description;
    
    if (featuresEl) {
      featuresEl.innerHTML = current.features.map(feature => 
        `<li class="flex items-center text-slate-300">
          <div class="w-2 h-2 bg-yellow-400 rounded-full mr-3 flex-shrink-0"></div>
          ${feature}
        </li>`
      ).join('');
    }
  }

  function nextEvolution() {
    currentLevel = (currentLevel + 1) % evolutionLevels.length;
    updateEvolution();
  }

  function prevEvolution() {
    currentLevel = (currentLevel - 1 + evolutionLevels.length) % evolutionLevels.length;
    updateEvolution();
  }

  document.getElementById('next-evolution')?.addEventListener('click', nextEvolution);
  document.getElementById('prev-evolution')?.addEventListener('click', prevEvolution);

  document.querySelectorAll('[data-evolution-dot]').forEach((dot, index) => {
    dot.addEventListener('click', () => {
      currentLevel = index;
      updateEvolution();
    });
  });
</script>
